{"version":3,"file":"google.strategy.js","sourceRoot":"","sources":["../../../src/auth/strategies/google.strategy.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,2CAA4C;AAC5C,+CAAoD;AACpD,qEAAmD;AACnD,2CAA+C;AAGxC,IAAM,cAAc,GAApB,MAAM,cAAe,SAAQ,IAAA,2BAAgB,EAAC,kCAAQ,EAAE,QAAQ,CAAC;IACtE,YAAoB,aAA4B;QAC9C,KAAK,CAAC;YACJ,QAAQ,EAAE,aAAa,CAAC,GAAG,CAAC,uBAAuB,CAAC;YACpD,YAAY,EAAE,aAAa,CAAC,GAAG,CAAC,2BAA2B,CAAC;YAC5D,WAAW,EAAE,aAAa,CAAC,GAAG,CAAC,0BAA0B,CAAC;YAC1D,KAAK,EAAE,CAAC,OAAO,EAAE,SAAS,CAAC;SAC5B,CAAC,CAAC;QANe,kBAAa,GAAb,aAAa,CAAe;IAOhD,CAAC;IAED,KAAK,CAAC,QAAQ,CACZ,WAAmB,EACnB,YAAoB,EACpB,OAAY;QAEZ,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC;QACjC,OAAO;YACL,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK;YACtB,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,EAAE;YAC5C,WAAW;YACX,QAAQ,EAAE,QAAQ;YAClB,UAAU,EAAE,OAAO,CAAC,EAAE;SACvB,CAAC;IACJ,CAAC;CACF,CAAA;AAxBY,wCAAc;yBAAd,cAAc;IAD1B,IAAA,mBAAU,GAAE;qCAEwB,sBAAa;GADrC,cAAc,CAwB1B","sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Strategy } from 'passport-google-oauth20';\nimport { ConfigService } from '@nestjs/config';\n\n@Injectable()\nexport class GoogleStrategy extends PassportStrategy(Strategy, 'google') {\n  constructor(private configService: ConfigService) {\n    super({\n      clientID: configService.get('oauth.google.clientID'),\n      clientSecret: configService.get('oauth.google.clientSecret'),\n      callbackURL: configService.get('oauth.google.callbackURL'),\n      scope: ['email', 'profile'],\n    });\n  }\n\n  async validate(\n    accessToken: string,\n    refreshToken: string,\n    profile: any,\n  ): Promise<any> {\n    const { name, emails } = profile;\n    return {\n      email: emails[0].value,\n      name: `${name.givenName} ${name.familyName}`,\n      accessToken,\n      provider: 'google',\n      providerId: profile.id,\n    };\n  }\n}\n"]}