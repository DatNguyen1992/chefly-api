{"version":3,"file":"licenses.controller.js","sourceRoot":"","sources":["../../src/licenses/licenses.controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,2CAAmF;AACnF,yDAAoD;AAG7C,IAAM,iBAAiB,GAAvB,MAAM,iBAAiB;IAC5B,YAA6B,cAA8B;QAA9B,mBAAc,GAAd,cAAc,CAAgB;IAAG,CAAC;IAGzD,AAAN,KAAK,CAAC,oBAAoB,CAAwB,YAAoB;QACpE,IAAI,CAAC,YAAY,EAAE,CAAC;YAClB,MAAM,IAAI,sBAAa,CAAC,2BAA2B,EAAE,mBAAU,CAAC,WAAW,CAAC,CAAC;QAC/E,CAAC;QAED,IAAI,CAAC;YACH,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;YACzE,IAAI,UAAU,EAAE,CAAC;gBACf,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,CAAC;YACtC,CAAC;iBAAM,CAAC;gBACN,MAAM,IAAI,sBAAa,CAAC,qBAAqB,EAAE,mBAAU,CAAC,SAAS,CAAC,CAAC;YACvE,CAAC;QACH,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,IAAI,sBAAa,CAAC,KAAK,CAAC,OAAO,EAAE,mBAAU,CAAC,qBAAqB,CAAC,CAAC;QAC3E,CAAC;IACH,CAAC;CACF,CAAA;AApBY,8CAAiB;AAItB;IADL,IAAA,YAAG,GAAE;IACsB,WAAA,IAAA,cAAK,EAAC,cAAc,CAAC,CAAA;;;;6DAehD;4BAnBU,iBAAiB;IAD7B,IAAA,mBAAU,EAAC,UAAU,CAAC;qCAEwB,iCAAc;GADhD,iBAAiB,CAoB7B","sourcesContent":["import { Controller, Get, Query, HttpStatus, HttpException } from '@nestjs/common';\r\nimport { LicenseService } from './licenses.service';\r\n\r\n@Controller('licenses')\r\nexport class LicenseController {\r\n  constructor(private readonly licenseService: LicenseService) {}\r\n\r\n  @Get()\r\n  async getLicenseViolations(@Query('licensePlate') licensePlate: string) {\r\n    if (!licensePlate) {\r\n      throw new HttpException('License plate is required', HttpStatus.BAD_REQUEST);\r\n    }\r\n\r\n    try {\r\n      const violations = await this.licenseService.getViolations(licensePlate);\r\n      if (violations) {\r\n        return { licensePlate, violations };\r\n      } else {\r\n        throw new HttpException('No violations found', HttpStatus.NOT_FOUND);\r\n      }\r\n    } catch (error) {\r\n      throw new HttpException(error.message, HttpStatus.INTERNAL_SERVER_ERROR);\r\n    }\r\n  }\r\n}"]}