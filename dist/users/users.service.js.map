{"version":3,"file":"users.service.js","sourceRoot":"","sources":["../../src/users/users.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable, NotFoundException } from '@nestjs/common';\nimport { InjectModel } from '@nestjs/mongoose';\nimport { Model } from 'mongoose';\nimport { User } from './schemas/user.schema';\nimport { UpdateUserDto } from './dto/update-user.dto';\nimport { BaseRepository } from '@shared/repositories/base.repository';\nimport { getCurrentDate } from '@common/utils/date.utils';\n@Injectable()\nexport class UsersService extends BaseRepository<User> {\n  constructor(@InjectModel(User.name) private userModel: Model<User>) {\n    super(userModel);\n  }\n\n  async findByEmail(email: string): Promise<User> {\n    const user = await this.userModel.findOne({\n      email,\n      $or: [{ deletedAt: null }, { deletedAt: { $exists: false } }],\n    });\n\n    if (!user) {\n      return null;\n    }\n    return user;\n  }\n\n  async findAllUser(): Promise<User[]> {\n    const user = await this.userModel.find({\n      $or: [{ deletedAt: null }, { deletedAt: { $exists: false } }],\n    });\nconsole.log('user ', user)\n    if (!user) {\n      return null;\n    }\n    return user;\n  }\n\n  async create(entities: Partial<User>): Promise<User> {\n    const user = await this.userModel.create(entities);\n\n    if (!user) {\n      throw new NotFoundException('User not found');\n    }\n    return user;\n  }\n\n  async update(id: string, updateUserDto: UpdateUserDto): Promise<User> {\n    const user = await this.userModel.findByIdAndUpdate(\n      id,\n      { ...updateUserDto, updatedAt: getCurrentDate() },\n      { new: true },\n    );\n    if (!user) {\n      throw new NotFoundException('User not found');\n    }\n    return user;\n  }\n\n  async remove(id: string): Promise<void> {\n    const result = await this.userModel.deleteOne({ _id: id });\n    if (result.deletedCount === 0) {\n      throw new NotFoundException('User not found');\n    }\n  }\n\n  async findAll(): Promise<User[]> {\n    const users = await this.userModel.find({\n      $or: [{ deletedAt: null }, { deletedAt: { $exists: false } }],\n    });\n    if (!users) {\n      throw new NotFoundException('User not found');\n    }\n    return users;\n  }\n}\n"]}